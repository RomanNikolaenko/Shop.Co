<div
  class="select"
  tabindex="0"
  (blur)="closeDropdown()"
  (keydown)="onKeydown($event)"
  role="listbox"
  [attr.aria-haspopup]="'listbox'"
  [attr.aria-expanded]="isOpen()"
  aria-label="Language selector"
>
  <div class="select__trigger" (click)="toggleDropdown()">
    {{ currentLang()?.viewValue || "Select language" }}
    <icon
      [class.select__arrow--open]="isOpen()"
      name="arrow-down"
      class="select__arrow"
    ></icon>
  </div>

  @if (isOpen()) {
    <ul @flyInBottom class="select__options">
      @for (lang of langs(); let i = $index; track lang.value) {
        <li
          class="select__option"
          (click)="selectLang(lang.value)"
          [class.select__option--selected]="
            lang.value === languageService.currentLang()
          "
          [class.select__option--focused]="focusedIndex() === i"
          [attr.aria-selected]="lang.value === languageService.currentLang()"
          role="option"
        >
          {{ lang.viewValue }}
        </li>
      }
    </ul>
  }
</div>
